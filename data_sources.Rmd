---
output: html_document
title: "COVID-19 Data and Resources"
---

<style type="text/css">
.navbar-header  {
    margin-left: -160px !important;
}
.main-container {
  max-width: 1500px;
  margin-left: auto;
  margin-right: auto;
}
</style>

******
### COVID data sources 
******

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(tidyverse)
library(here)
library(DT)

df <- read_csv(here("data/covid_resources.csv"))
```

```{r}
dat_html <- df %>%
  select(Category, Title, `Source name`,  Link, 
         `Date posted on Mathematica's website`, Coverage, 
         Aggregation, `Update frequency/date`, API) %>%
  filter(!is.na(`Source name`)) %>%
  mutate(`Data source` =  paste0("<a href='", Link,"'>",`Source name`,"</a>"), 
         value = "Yes") %>%
  select(-`Source name`, -Link) %>%
  pivot_wider(names_from = `Category`, values_from = value) %>%
  select(`Data source`, everything()) %>% 
  replace(is.na(.), "-")

DT::datatable(dat_html, filter = "top", escape = FALSE, 
              options = list(
                autoWidth = TRUE,
                columnDefs = list(list(width = '12px', targets = "_all")),
                pageLength = 15, 
                lengthMenu = c(15, 30), 
                initComplete = JS("function(settings, json) {",
                                  "$(this.api().table().header()).css({'font-size': '12px', 'background-color': '#2c3c54', 'color': '#fff'});",
                                  "}"))) %>%  
  formatStyle(columns = colnames(.$x$data), `font-size` = '10px')
```